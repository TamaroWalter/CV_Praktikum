"""
Strip-Plot für Canny Edge Detection Metriken (BSDS-Datensatz)
"""
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.patches as mpatches
import csv
import io

# ── Daten ────────────────────────────────────────────────────────────────────
CSV_DATA = """image_nr,precision,recall,accuracy,score
385022.jpg,0.20123022847100175,0.12599724896836315,0.9237823486326716,0.15496531416126572
145059.jpg,0.2105716748060902,0.13380795910916393,0.8856658935545524,0.16363432943751546
159002.jpg,0.23527218493661448,0.12355590366164089,0.9004058837889252,0.16202336177043986
208078.jpg,0.2217160212604404,0.1500513874614594,0.9182434082029849,0.17897639726976827
2018.jpg,0.22146739130434784,0.11262091202210962,0.9149780273436104,0.14931297262996995
384089.jpg,0.34594594594594597,0.1114335461404527,0.9132995605467357,0.1685689164198183
41006.jpg,0.17164697706740792,0.07190684133915574,0.9331665039061077,0.1013541197613889
347031.jpg,0.3398576512455516,0.08115572551519014,0.9226837158201717,0.13102383499456502
196088.jpg,0.1713823767178658,0.1095890410958904,0.9161529541014227,0.13369067788412348
71099.jpg,0.31438721136767317,0.0661311414160284,0.9119415283201734,0.1092761199866958
123057.jpg,0.3115290269828291,0.10063391442155309,0.9351959228514198,0.15212616919787714
253092.jpg,0.12119328775637042,0.1406926406926407,0.9205017089842346,0.13021702340835412
71076.jpg,0.2690927729369554,0.11191643572798977,0.9146728515623604,0.15808491003336522
64061.jpg,0.3649851632047478,0.11263736263736264,0.9277954101561084,0.1721483518890758
181021.jpg,0.20762368207623683,0.10168818272095333,0.90116882324205,0.1365151269023137
188025.jpg,0.4110764430577223,0.15255463887682733,0.887619018554552,0.2225271785706376
189013.jpg,0.28948758584257794,0.12652966982221195,0.9217529296873594,0.17609254075432837
334025.jpg,0.234375,0.09016590526568886,0.9235687255857966,0.13023093885925213
196062.jpg,0.22982456140350876,0.10796703296703297,0.9303588867186081,0.1469158835011618
187058.jpg,0.15205047318611986,0.10659000442282177,0.8973388671873631,0.12532500815499045
198087.jpg,0.31812819504522216,0.13345430550973275,0.8933868408201762,0.18803021082747773
326085.jpg,0.14423076923076922,0.12448132780082988,0.9406433105467316,0.13363028455930295
15011.jpg,0.3397019487963317,0.16372007366482505,0.9043426513670495,0.22095190315418423
23050.jpg,0.37248968363136176,0.16734643430972684,0.8623962402342434,0.23093978763744058
201080.jpg,0.2994871794871795,0.16922631121414083,0.9354095458982948,0.21625624422898101
51084.jpg,0.3844020797227036,0.18983224922971584,0.90068054199205,0.2541537712128628
140006.jpg,0.2114892060007318,0.12620087336244543,0.9060516357420493,0.15807465688054548
33044.jpg,0.21878715814506539,0.133381660021747,0.9434661865232936,0.16572843483470678
80090.jpg,0.22782258064516128,0.08506900878293601,0.9268341064451712,0.12388086576487366
388018.jpg,0.37154471544715445,0.20017520805957073,0.881027221679553,0.26017648278199584
106047.jpg,0.0911300121506683,0.13521634615384615,0.9438018798826685,0.1088797435564881
94095.jpg,0.31906976744186044,0.05755999328746434,0.9031372070311122,0.09752629823511892
104010.jpg,0.15312290127602418,0.04393910194642513,0.9050598144529869,0.06828391387542318
69007.jpg,0.23891810668670171,0.12056872037914691,0.8983001708983005,0.1602620592939686
250047.jpg,0.15083798882681565,0.14740673339399454,0.8871459960936147,0.14910261810236466
290035.jpg,0.2894177645558861,0.12922201138519923,0.9044647216795495,0.17866981076558622
226060.jpg,0.2848819380558111,0.14757744241461476,0.8825378417967403,0.1944328125822968
168084.jpg,0.24761399787910923,0.15103492884864167,0.9382934570311069,0.1876255477241592
81090.jpg,0.2326478149100257,0.10313390313390314,0.8674926757811177,0.14291353699928425
189029.jpg,0.24460114587924195,0.1391326146903986,0.9214477539061094,0.1773729579855697
41029.jpg,0.22501120573733752,0.11590856615100438,0.9151916503904854,0.15300212900796356
107072.jpg,0.34331476323119775,0.10818520956769805,0.9235992431639216,0.16452527584877064
207038.jpg,0.1776937618147448,0.09475806451612903,0.8983001708983005,0.12360288829697423
108069.jpg,0.052183466080747046,0.1370851370851371,0.9290924072264207,0.07559180026312202
232076.jpg,0.18211920529801323,0.12629161882893225,0.9425506591795437,0.14915253753671717
230098.jpg,0.20576735092864126,0.09834150899322588,0.9163055419920477,0.1330804444938434
112056.jpg,0.37488015340364333,0.14433370247323735,0.9546813964842293,0.2084221708258979
8068.jpg,0.38461538461538464,0.2107348703170029,0.9522857666014173,0.27228298355776204
16068.jpg,0.117168818747011,0.07721399306649858,0.9271545410154836,0.09308510159422706
36046.jpg,0.3405044510385757,0.12493195427327164,0.937377929687357,0.18279569499732687
112090.jpg,0.3652636671504596,0.1217349242179942,0.8968658447264257,0.18260974349906287
100007.jpg,0.47734326505276226,0.1947821681864235,0.9386444091795443,0.27666846143503626
226043.jpg,0.24948559670781892,0.14593049496013238,0.8688507080076799,0.18414807317871465
344010.jpg,0.23429951690821257,0.10248283148441627,0.9288024902342333,0.14259463009158638
302022.jpg,0.21483375959079284,0.1377049180327869,0.9491577148436052,0.1678321630714941
226022.jpg,0.15666810530858868,0.07920576041893956,0.9057922363279868,0.10521738684359987
3063.jpg,0.223935389133627,0.12263771612384398,0.9505767822264175,0.15848271821228796
164046.jpg,0.18654230512991338,0.16326530612244897,0.9594726562498537,0.17412934825597035
80085.jpg,0.23696682464454977,0.13273161667109104,0.9255828857420463,0.17015483630269324
288024.jpg,0.23655063291139242,0.0900466797169101,0.8783416748045535,0.13043952049078217
15062.jpg,0.25651634257343814,0.13777777777777778,0.9133758544920482,0.17926846444287928
147080.jpg,0.26994497936726275,0.14626420719209987,0.8976898193358006,0.18972809211825797
268048.jpg,0.16862745098039217,0.15167548500881833,0.9171447753904851,0.15970287337983632
365072.jpg,0.24624395212630507,0.16929271708683474,0.8824310302733029,0.20064321542253127
268074.jpg,0.22495151906916613,0.0718562874251497,0.9131164550779857,0.10892018412370624
176051.jpg,0.18475559237779618,0.1664179104477612,0.9358825683592322,0.17510796517460758
101027.jpg,0.37511032656663723,0.13687600644122383,0.9483032226561053,0.2005663009433682
376086.jpg,0.2169576059850374,0.14974182444061962,0.8890380859373643,0.1771894045366289
384022.jpg,0.27263045793397234,0.16672093780527517,0.9401092529295441,0.2069104822576109
156054.jpg,0.23522012578616353,0.08932409839980893,0.9232635498045466,0.12947896433309578
134049.jpg,0.34450713574510455,0.13002630590003758,0.8638916015623682,0.188795921812638
107045.jpg,0.2546754675467547,0.09631786977324734,0.9130401611326732,0.13977358092343148
225022.jpg,0.18654607122668174,0.09691629955947137,0.931121826171733,0.12756087682962644
161045.jpg,0.3092698933552092,0.12906538856555974,0.9483337402342303,0.18212559970979614
6046.jpg,0.3403014098201264,0.1315047905316551,0.9087524414061113,0.1897018929982114
207049.jpg,0.3315508021390374,0.09367327667610954,0.9115142822264235,0.14607568497586867
267036.jpg,0.30903954802259886,0.09008563899868248,0.8970336914061131,0.13950522476282254
235098.jpg,0.21400500178635226,0.125787484250315,0.9029083251951747,0.15844464551556522
79073.jpg,0.3039950062421973,0.1389840182648402,0.8739013671873667,0.19075596905846134
388067.jpg,0.3647097408986553,0.16235946853555264,0.8829040527342403,0.22469185267775343
247003.jpg,0.24368825466520308,0.12009737625101434,0.9293365478514207,0.16089870911216175
246009.jpg,0.15428845232390992,0.11751824817518249,0.9361724853514197,0.1334161956301414
185092.jpg,0.3867403314917127,0.1361536591295891,0.9322357177732953,0.20140262157539018
140088.jpg,0.29653150952613583,0.12152152152152153,0.911071777343611,0.17239420206768288
20069.jpg,0.23510054844606948,0.14250886524822695,0.9090423583982988,0.17745273436506784
163004.jpg,0.24914509037616023,0.08237764496850267,0.8898620605467392,0.12381645657111923
35049.jpg,0.16526791478373143,0.07411696583671105,0.9314727783201704,0.10233859256682985
104055.jpg,0.2586705202312139,0.10984964713102179,0.9400787353514191,0.154210635488034
296058.jpg,0.2312827849308536,0.08550775740479549,0.8962554931639258,0.12485518977737162
120003.jpg,0.4485981308411215,0.18299353555445053,0.9040832519529871,0.25994819461275065
306052.jpg,0.17473684210526316,0.11266968325791855,0.9521331787107923,0.13700137074900354
70011.jpg,0.1430084745762712,0.03849443969204448,0.9362030029295447,0.060660522382432414
217090.jpg,0.20105655686761964,0.11845477846942512,0.8872985839842397,0.1490783363480018
238025.jpg,0.2164316370324954,0.12252690038181187,0.9419250488279813,0.15647162658942695
87015.jpg,0.36850519584332536,0.15407754010695188,0.9493255615232927,0.21729907668085338
309040.jpg,0.30084348641049674,0.14485559566787004,0.8791046142576784,0.1955528436173204
81095.jpg,0.22473178994918125,0.10636023516835917,0.928024291992046,0.1443859923740879
43051.jpg,0.2564734895191122,0.14464534075104313,0.9720306396482892,0.184971093654517
223004.jpg,0.23471325484238512,0.1214622641509434,0.90104675292955,0.1600828863227573
141048.jpg,0.2837037037037037,0.1302721088435374,0.9462280273436057,0.1785547742416093
106005.jpg,0.1705532693187014,0.16946842344388915,0.9444274902342309,0.17000911077033365
206062.jpg,0.3090659340659341,0.13826300696435886,0.9127807617186108,0.19105575570632136
388006.jpg,0.2391952309985097,0.10760978880321824,0.9438018798826685,0.14843930207818679
41085.jpg,0.18290155440414507,0.07712475420581166,0.9114837646482985,0.10849853586121135
130066.jpg,0.19319022945965952,0.06495769039323046,0.9260406494139213,0.09722480532297187
100099.jpg,0.3873626373626374,0.14048488874128195,0.9503021240232925,0.20619058834332066
102062.jpg,0.20688134097926775,0.11290322580645161,0.9163360595701727,0.1460831600479292
257098.jpg,0.3395997574287447,0.14049172102358254,0.9311065673826705,0.19875775983515762
61034.jpg,0.1647982062780269,0.094371923817676,0.901321411132675,0.12001632412141813
281017.jpg,0.23575129533678757,0.13777441332323997,0.9208526611326721,0.1739130388222751
163096.jpg,0.14473089099954772,0.1012337867763366,0.9277954101561084,0.11913625725614387
145079.jpg,0.2764084507042254,0.11936894126591903,0.9042205810545496,0.1667330370722142
196027.jpg,0.2552742616033755,0.0736457699330493,0.9427795410154812,0.11431270318497347
253016.jpg,0.27932048350212346,0.1120429825710916,0.8629455566404933,0.15993265584610947
243095.jpg,0.29838709677419356,0.12269066792989104,0.8873443603514272,0.17388384951266686
103029.jpg,0.39227166276346603,0.09029649595687332,0.9405822753904816,0.14680104866694813
220003.jpg,0.2370023419203747,0.10166767128792445,0.9069213867186117,0.14229470895928098
259060.jpg,0.21318228630278063,0.1313451776649746,0.9023590087889248,0.1625441648934204
217013.jpg,0.36800526662277816,0.11624038261592846,0.9205017089842346,0.17667509116822766
157087.jpg,0.28512396694214875,0.14081632653061224,0.891235351562364,0.18852458573785433
326025.jpg,0.18964259664478483,0.14827487881380097,0.9205169677732971,0.1664266233354546
14092.jpg,0.25669642857142855,0.04494821184287669,0.9152679443357978,0.07650091214872248
78098.jpg,0.2717948717948718,0.15290299314821493,0.8936462402342387,0.1957073574966223
70090.jpg,0.17378048780487804,0.13123561013046814,0.9406433105467316,0.1495408783504492
45000.jpg,0.2746081504702194,0.06996805111821086,0.8935089111326762,0.1115213207609761
226033.jpg,0.3133985048878666,0.10611370716510904,0.9117279052732984,0.1585454507661736
228076.jpg,0.17838354854136776,0.11569478908188585,0.9302825927732956,0.1403574740606981
230063.jpg,0.23962264150943396,0.12841253791708795,0.9034881591795497,0.16721526866259778
69022.jpg,0.092125579001544,0.06322854115153656,0.9326171874998578,0.07498952177542416
41096.jpg,0.18944519621109607,0.15555555555555556,0.9585266113279788,0.17083587058210856
35028.jpg,0.17880794701986755,0.048441354563803544,0.9201202392576722,0.0762308065978545
346016.jpg,0.31638913234005256,0.09906695938529089,0.9380035400389194,0.15088818863563414
103006.jpg,0.20601028074337682,0.16855386606276285,0.9301452636717331,0.18540924771903927
118072.jpg,0.2668506109578242,0.11794425087108014,0.894363403320176,0.16358583602904686
48017.jpg,0.0648491265219693,0.11688931297709923,0.91784667968736,0.08341844961494321
107014.jpg,0.2360549717057397,0.05877616747181964,0.9142303466795481,0.09411764386656765
117025.jpg,0.34129478315524825,0.14285714285714285,0.9342956542967324,0.20140949138891412
108036.jpg,0.1988169569503779,0.1485027000490918,0.9098663330076737,0.17001545105546959
279005.jpg,0.2771345875542692,0.12263848863272495,0.9429473876951686,0.17003329208415768
202000.jpg,0.3446877534468775,0.10538060996776594,0.9326171874998578,0.16141283348157626
335094.jpg,0.3488536155202822,0.16647029119676823,0.8962707519529883,0.22538741586330618
160067.jpg,0.15568862275449102,0.13259156235512284,0.9477844238279804,0.1432148172654464
189006.jpg,0.281099324975892,0.12082901554404145,0.9125213623045483,0.16900999724450708
175083.jpg,0.2231160033869602,0.10886180541210494,0.9061737060545493,0.14632791451490917
48025.jpg,0.28503075871496925,0.09305958491408167,0.9220275878904843,0.14030955214363736
29030.jpg,0.27010869565217394,0.1063329054343175,0.9157714843748603,0.1525944079820145
196040.jpg,0.2654434250764526,0.0761938202247191,0.901382446288925,0.11840130604186806
285022.jpg,0.22907153729071536,0.08037383177570094,0.9319915771482953,0.11899584513655659
49024.jpg,0.17613168724279835,0.07659269863994274,0.9453582763670433,0.10675978624708292
183066.jpg,0.2273815222594543,0.16533240515140968,0.9387817382811068,0.19145505356899714
247012.jpg,0.2737576285963383,0.14863905325443788,0.9196929931639222,0.19266758249193416
101084.jpg,0.3069432684165961,0.16514806378132119,0.9190979003904848,0.2147511802851903
108004.jpg,0.31179138321995464,0.07913669064748201,0.9419097900389188,0.1262336437757439
43033.jpg,0.09538461538461539,0.02072192513368984,0.9463195800779807,0.034047223866050164
209021.jpg,0.3007518796992481,0.0699912510936133,0.9428253173826687,0.11355571020890251
65084.jpg,0.2728310502283105,0.1561411149825784,0.9117126464842359,0.19861495381873387
118031.jpg,0.2563550193881947,0.12713675213675213,0.9113311767576735,0.1699757133222894
10081.jpg,0.1603727317312408,0.11260330578512397,0.934555053710795,0.13230830994170625
250087.jpg,0.26926605504587153,0.1463110667996012,0.9234313964842341,0.18959947864181684
368037.jpg,0.30565371024734983,0.15220834066514166,0.8964996337889257,0.20321860239817863
134067.jpg,0.2176206805592192,0.169857936998147,0.8932189941404888,0.19079555474294704
249021.jpg,0.3118892508143323,0.15581773799837267,0.910888671874861,0.20781334335925802
16004.jpg,0.22624156958920907,0.14822253464551113,0.8967742919920507,0.1791044728289859
223060.jpg,0.19666215606675688,0.14845080013619338,0.9346618652342324,0.1691889745310266
160006.jpg,0.26310326933056566,0.12527798369162343,0.924316406249859,0.1697355162188876
157032.jpg,0.3052180128663331,0.12096317280453257,0.9378204345701694,0.1732602921407131
317043.jpg,0.1628721541155867,0.0691449814126394,0.9472045898436056,0.09707724007481788
289011.jpg,0.31868131868131866,0.05471698113207547,0.9140930175779856,0.09339774307036862
14085.jpg,0.19116909182137481,0.08821486455197962,0.9153137207029853,0.12072242913905377
335088.jpg,0.23058823529411765,0.11103917125283264,0.881271362304553,0.14989620450554889
306051.jpg,0.29339622641509433,0.1188383645395491,0.9067687988279867,0.1691596369082144
277053.jpg,0.3310088331008833,0.12252624333161245,0.9002380371092377,0.1788495313491847
179084.jpg,0.3639867841409692,0.14738015607580826,0.9240264892576715,0.209807962886482
147077.jpg,0.2186532507739938,0.12829246139872844,0.9106140136717361,0.16170577667860103
189096.jpg,0.1808666017526777,0.1450888498340168,0.8818511962889279,0.16101418944749699
100039.jpg,0.18672456575682383,0.07139468690702087,0.9202575683592347,0.10329443662962383
77062.jpg,0.3107488537952114,0.08827785817655572,0.8832244873045527,0.13749577024970208
109055.jpg,0.12472060795708538,0.09262948207171315,0.9284210205076708,0.10630595814957781
258089.jpg,0.23410329613288347,0.13768890245764007,0.8687744140623674,0.17339484347157566
120093.jpg,0.35321293574128515,0.16129650939777523,0.9097747802732987,0.22146148351661182
92014.jpg,0.32365747460087085,0.11006910167818361,0.8961334228514258,0.16427255606520227
206097.jpg,0.24948453608247423,0.10574612191391741,0.9153289794920478,0.1485345976292927
97010.jpg,0.23534338358458962,0.09258649093904447,0.9440460205076685,0.13289193257559473
393035.jpg,0.3953488372093023,0.14993215739484397,0.9028930664061122,0.21741268661784935
17067.jpg,0.21700654097729896,0.11906269791006967,0.9052734374998619,0.15376226369077003
81066.jpg,0.20085995085995087,0.09481008988112496,0.9325103759764203,0.12881622570036425
146074.jpg,0.28607232366630864,0.1314360914624116,0.8890075683592394,0.18011721840907613
187099.jpg,0.2308602999210734,0.12159634171689877,0.9057769775389243,0.15929203087875132
5096.jpg,0.36797385620915035,0.10707493343476607,0.9136047363279857,0.16588096291944196
118015.jpg,0.2753199268738574,0.15317331163547598,0.9062347412107993,0.19683701017560953
128035.jpg,0.3184880239520958,0.1441884107082345,0.8951416015623634,0.19850711024189804
103078.jpg,0.30506216696269983,0.1678065461651197,0.924133300781109,0.21651433516282853
372019.jpg,0.1878483835005574,0.14507102884201464,0.947463989257668,0.1637114354517515
105027.jpg,0.17701863354037267,0.10026385224274406,0.9526062011717297,0.12801796281714703
28083.jpg,0.5150214592274678,0.10624169986719788,0.9314880371092329,0.17614678615552498
69000.jpg,0.19823280829811757,0.15030585493737256,0.9236450195311091,0.17097415016412532
296028.jpg,0.2762063227953411,0.1360655737704918,0.9318389892576704,0.1823174035953115
130014.jpg,0.27782357790601814,0.08387257341961175,0.9304656982420456,0.12884725317636686
159022.jpg,0.2997658079625293,0.08737201365187713,0.9500732421873551,0.13530655041615647
141012.jpg,0.08216216216216216,0.03788634097706879,0.9575958251951664,0.05185942932052272
total,0.254,0.12,0.918,0.159
"""

# ── CSV parsen ────────────────────────────────────────────────────────────────
reader = csv.DictReader(io.StringIO(CSV_DATA))
rows = list(reader)

metrics   = ["precision", "recall", "accuracy", "score"]
labels    = ["Precision", "Recall", "Accuracy", "F-Score"]
colors    = ["#4C72B0", "#DD8452", "#55A868", "#C44E52"]

# Einzelbilder vs. Gesamt trennen
data_imgs  = {m: [] for m in metrics}
data_total = {}

for row in rows:
    if row["image_nr"] == "total":
        data_total = {m: float(row[m]) for m in metrics}
    else:
        for m in metrics:
            data_imgs[m].append(float(row[m]))

# ── Plot ──────────────────────────────────────────────────────────────────────
np.random.seed(42)
fig, ax = plt.subplots(figsize=(10, 6))

for i, (metric, label, color) in enumerate(zip(metrics, labels, colors)):
    vals = np.array(data_imgs[metric])
    n    = len(vals)
    
    # Jitter (leichtes horizontales Rauschen für Lesbarkeit)
    jitter = np.random.uniform(-0.18, 0.18, n)
    
    # Einzelpunkte
    ax.scatter(
        np.full(n, i) + jitter, vals,
        color=color, alpha=0.35, s=25, linewidths=0,
        label="_nolegend_"
    )

    ax.scatter(
        i, data_total[metric],
        color=color, s=100, zorder=5,
        edgecolors="white", linewidths=1.0
    )
    # Wert-Label rechts von allen Punkten der Kategorie
    ax.text(i + 0.25, data_total[metric], f'Ø {data_total[metric]:.3f}',
            ha='left', va='center', fontsize=9.5, fontweight='bold', color=color)

    # Median-Linie
    median = np.median(vals)
    ax.hlines(median, i - 0.2, i + 0.2, colors=color, linewidths=1.5,
              linestyles="--", alpha=0.7)

    """
    # Gesamtdurchschnitt (fetter Punkt mit Umrandung)
    ax.scatter(
        i, data_total[metric],
        color=color, s=220, zorder=5,
        edgecolors="white", linewidths=2.0
    )
    # Wert-Label über dem Durchschnittspunkt
    ax.text(i, data_total[metric] + 0.012, f'{data_total[metric]:.3f}',
            ha='center', va='bottom', fontsize=9.5, fontweight='bold', color=color)
    """
# ── Optik ─────────────────────────────────────────────────────────────────────
ax.set_xticks(range(len(metrics)))
ax.set_xticklabels(labels, fontsize=12)
ax.set_ylabel("Wert", fontsize=11)
#ax.set_title("Aufgabe 1 - Ergebnisse", fontsize=13, pad=14)
ax.set_xlim(-0.55, len(metrics) - 0.45)
ax.set_ylim(0, 1.0)
ax.yaxis.grid(True, linestyle='--', alpha=0.4)
ax.set_axisbelow(True)
ax.spines[['top', 'right']].set_visible(False)

# Legende manuell
legend_handles = [
    mpatches.Patch(facecolor='none', edgecolor='none',label='● Durchschnitt'),
    mpatches.Patch(facecolor='none', edgecolor='none',label='- - Median'),
    mpatches.Patch(facecolor='none', edgecolor='none',
                   label='· Einzelbilder'),
]
ax.legend(handles=legend_handles, loc='upper right', fontsize=9,
          framealpha=0.8, handlelength=0)

plt.tight_layout()
plt.savefig("/home/tamaro/Downloads/a3plot.png", dpi=150, bbox_inches='tight')
print("Gespeichert: metrics_stripplot.png")
#plt.show()
